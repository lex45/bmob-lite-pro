<!DOCTYPE html>
<html>
  <body>
    <h2>üìä –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ <%= groupBy %></h2>

    <form method="get">
      <label>–ì—Ä—É–ø—É–≤–∞—Ç–∏ –ø–æ:</label>
      <select name="by">
        <option value="subid">subid</option>
        <option value="cid">cid</option>
        <option value="type">type</option>
        <option value="status">status</option>
      </select><br><br>

      <label>–ó:</label>
      <input type="date" name="from" value="<%= fromDate.slice(0,10) %>" />
      <label>–ü–æ:</label>
      <input type="date" name="to" value="<%= toDate.slice(0,10) %>" />
      <button>üîç –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
    </form>

    <% if (error) { %>
      <p style="color:red;"><%= error %></p>
    <% } else { %>
      <table border="1">
        <tr><th><%= groupBy.toUpperCase() %></th><th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th></tr>
        <% rows.forEach(r => { %>
          <tr>
            <td><%= r[groupBy] || '[‚Äî]' %></td>
            <td><%= r.count %></td>
          </tr>
        <% }) %>
      </table>
    <% } %>
  </body>
</html>